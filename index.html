<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ET Game â€“ Register</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    /* Simplified styling, still clean */
    :root {
      --accent:#38bdf8;
      --bg:#020617;
      --card:#0b1120;
      --text:#f9fafb;
      --muted:#9ca3af;
      --danger:#f97373;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body {
      font-family:"Poppins",system-ui;
      background:radial-gradient(circle at top,#0b1120,#020617);
      color:var(--text);
      min-height:100vh;
      display:flex;
      justify-content:center;
      padding:1.4rem;
    }
    .shell{
      width:100%;
      max-width:1100px;
      background:rgba(15,23,42,0.98);
      border-radius:1.5rem;
      padding:1.6rem 1.7rem 2rem;
      border:1px solid rgba(148,163,184,0.5);
      box-shadow:0 20px 45px rgba(0,0,0,0.7);
    }
    header{
      display:flex;
      justify-content:space-between;
      gap:1rem;
      flex-wrap:wrap;
      margin-bottom:1.1rem;
    }
    .brand-title h1{font-size:1.3rem;font-weight:600}
    .brand-title p{font-size:0.86rem;color:var(--muted);margin-top:0.2rem}
    .pill{
      font-size:0.78rem;
      padding:0.3rem 0.7rem;
      border-radius:999px;
      border:1px solid rgba(75,85,99,0.9);
      background:rgba(15,23,42,0.9);
      color:var(--muted);
      display:inline-flex;
      align-items:center;
      gap:0.35rem;
    }
    .pill-dot{
      width:7px;height:7px;border-radius:999px;
      background:#22c55e;
      box-shadow:0 0 0 6px rgba(34,197,94,0.35);
    }
    .layout{
      display:grid;
      grid-template-columns:minmax(0,1.7fr) minmax(0,1.1fr);
      gap:1.2rem;
    }
    @media(max-width:900px){.layout{grid-template-columns:1fr}}
    .card{
      background:var(--card);
      border-radius:1rem;
      padding:1rem 1.1rem 1.2rem;
      border:1px solid rgba(55,65,81,0.9);
      box-shadow:0 16px 30px rgba(15,23,42,0.9);
    }
    .card h2{
      font-size:0.98rem;
      margin-bottom:0.4rem;
      display:flex;
      align-items:center;
      gap:0.4rem;
    }
    .card h2 span.icon{
      width:24px;height:24px;border-radius:999px;
      display:inline-flex;align-items:center;justify-content:center;
      font-size:0.9rem;
      background:rgba(56,189,248,0.16);
    }
    .card p.sub{font-size:0.8rem;color:var(--muted);margin-bottom:0.5rem}
    .students{
      max-height:420px;
      overflow:auto;
      display:grid;
      grid-template-columns:repeat(auto-fill,minmax(190px,1fr));
      gap:0.5rem;
    }
    @media(max-width:600px){.students{grid-template-columns:1fr}}
    .student-btn{
      border:none;
      background:rgba(15,23,42,0.95);
      border-radius:0.8rem;
      padding:0.5rem 0.7rem;
      text-align:left;
      font-size:0.8rem;
      color:var(--text);
      display:flex;
      align-items:center;
      gap:0.45rem;
      cursor:pointer;
      border:1px solid rgba(55,65,81,0.9);
      transition:0.15s;
    }
    .student-btn:hover{
      border-color:var(--accent);
      transform:translateY(-1px);
      box-shadow:0 10px 20px rgba(8,47,73,0.9);
    }
    .roll{
      min-width:26px;height:26px;border-radius:999px;
      display:inline-flex;align-items:center;justify-content:center;
      font-size:0.78rem;font-weight:500;color:var(--accent);
      background:rgba(31,41,55,0.95);
    }
    .student-name{
      white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
      font-size:0.83rem;font-weight:500;
    }
    .flow-steps{
      font-size:0.82rem;color:var(--muted);
      display:flex;flex-direction:column;gap:0.4rem;
      margin-top:0.3rem;
    }
    .flow-steps strong{color:var(--text)}
    .note{font-size:0.76rem;color:var(--muted);margin-top:0.7rem}
    .note span{color:#fbbf24}
    /* modal */
    .backdrop{
      position:fixed;inset:0;
      background:rgba(15,23,42,0.93);
      display:none;align-items:center;justify-content:center;
      z-index:30;padding:1rem;
    }
    .backdrop.active{display:flex}
    .modal{
      width:100%;max-width:420px;
      background:radial-gradient(circle at top,rgba(56,189,248,0.16),transparent 60%),
                 #020617;
      border-radius:1.3rem;
      padding:1.3rem 1.3rem 1.1rem;
      border:1px solid rgba(148,163,184,0.6);
      box-shadow:0 22px 45px rgba(0,0,0,0.9);
    }
    .modal-header{
      display:flex;justify-content:space-between;gap:0.8rem;margin-bottom:0.5rem;
    }
    .modal-header h3{font-size:0.98rem}
    .modal-header p{font-size:0.78rem;color:var(--muted);margin-top:0.1rem}
    .x-btn{
      border:none;background:rgba(15,23,42,0.9);
      width:30px;height:30px;border-radius:999px;
      display:inline-flex;align-items:center;justify-content:center;
      color:var(--muted);cursor:pointer;font-size:0.9rem;
    }
    .summary{
      display:flex;justify-content:space-between;gap:0.6rem;
      background:rgba(15,23,42,0.98);
      padding:0.5rem 0.7rem;border-radius:0.8rem;
      border:1px solid rgba(55,65,81,0.95);
      margin-bottom:0.6rem;font-size:0.8rem;
    }
    .summary .name{font-weight:500}
    .summary .usn{color:var(--muted);font-size:0.78rem}
    .summary .roll-label{font-size:0.76rem;color:var(--muted);text-align:right}
    .summary .roll-label span{color:var(--accent);font-weight:600}
    .field label{font-size:0.76rem;color:#e5e7eb;margin-bottom:0.15rem;display:block}
    .field input{
      width:100%;padding:0.5rem 0.7rem;border-radius:0.8rem;
      border:1px solid rgba(55,65,81,0.95);
      background:#020617;color:var(--text);font-size:0.8rem;
      outline:none;
    }
    .field input:focus{
      border-color:var(--accent);
      box-shadow:0 0 0 1px rgba(56,189,248,0.7);
    }
    .error{font-size:0.75rem;color:var(--danger);min-height:1.1em;margin-top:0.2rem}
    .btn{
      width:100%;margin-top:0.5rem;
      border:none;border-radius:999px;
      background:linear-gradient(135deg,#38bdf8,#2563eb);
      color:white;font-size:0.86rem;font-weight:500;
      padding:0.55rem 0.7rem;
      display:flex;align-items:center;justify-content:center;
      gap:0.3rem;cursor:pointer;
      box-shadow:0 14px 25px rgba(37,99,235,0.6);
    }
  </style>
</head>
<body>
  <div class="shell">
    <header>
      <div class="brand-title">
        <h1>ET Game Registration â€“ 1st Sem</h1>
        <p>Select your name, enter USN, then youâ€™ll go to Game 1 (cards).</p>
      </div>
      <div>
        <div class="pill">
          <span class="pill-dot"></span>
          <span>Fun event â€¢ Shared scoreboard (Firebase)</span>
        </div>
      </div>
    </header>

    <div class="layout">
      <section class="card">
        <h2><span class="icon">ðŸ‘¥</span> Students</h2>
        <p class="sub">Click your name to register.</p>
        <div style="margin-bottom:0.5rem;">
          <input id="searchInput" placeholder="Search by name or rollâ€¦" style="width:100%;padding:0.5rem 0.7rem;border-radius:999px;border:1px solid rgba(55,65,81,0.9);background:#020617;color:#e5e7eb;font-size:0.8rem;outline:none;" />
        </div>
        <div id="studentList" class="students"></div>
        <p style="font-size:0.78rem;color:var(--muted);margin-top:0.4rem;">
          Showing <span id="visibleCount">0</span> students.
        </p>
      </section>

      <section class="card">
        <h2><span class="icon">ðŸ“œ</span> Flow</h2>
        <p class="sub">What will happen:</p>
        <div class="flow-steps">
          <div><strong>1.</strong> Register with name + USN here.</div>
          <div><strong>2.</strong> Game 1: find matching cards (time recorded).</div>
          <div><strong>3.</strong> Game 2: MDâ€™s questions (MCQ + timer).</div>
          <div><strong>4.</strong> We send your total score to <strong>Firebase</strong>.</div>
          <div><strong>5.</strong> Result page shows <strong>shared scoreboard</strong> for everyone.</div>
          <div><strong>6.</strong> Finally you go to a <strong>Thanks + Reward</strong> page.</div>
        </div>
        <p class="note">
          All scores are stored in Firestore <span>scores</span> collection. Anyone opening the site sees the same
          scoreboard. This is still just for fun (not official marks).
        </p>
      </section>
    </div>
  </div>

  <!-- Modal -->
  <div id="loginModal" class="backdrop">
    <div class="modal">
      <div class="modal-header">
        <div>
          <h3>Confirm your USN</h3>
          <p>Weâ€™ll use this to track your score across all games.</p>
        </div>
        <button class="x-btn" id="closeModalBtn">âœ•</button>
      </div>
      <div class="summary">
        <div>
          <div class="name" id="modalStudentName">Student Name</div>
          <div class="usn" id="modalStudentUsn">USN â€¢ ET</div>
        </div>
        <div class="roll-label">
          Roll<br><span id="modalStudentRoll">â€“</span>
        </div>
      </div>
      <form id="loginForm">
        <div class="field">
          <label for="usnInput">Enter your RVCE number (USN)</label>
          <input id="usnInput" type="text" placeholder="Example: RVCE25BTE059" autocomplete="off" />
        </div>
        <div class="error" id="loginError"></div>
        <button class="btn" type="submit">
          Start Game 1 (cards) â†—
        </button>
      </form>
    </div>
  </div>

<!-- Firebase v8 CDN (simpler API) -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

<script>
  // TODO: put your real Firebase config here
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT.firebaseapp.com",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_PROJECT.appspot.com",
    messagingSenderId: "YOUR_SENDER_ID",
    appId: "YOUR_APP_ID"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  const students = [
    { roll: 1,  name: "ABHAY BALIGA B",                 usn: "RVCE25BTE059" },
    { roll: 2,  name: "ABHINAV H KRISHNA",              usn: "RVCE25BTE051" },
    { roll: 3,  name: "ANANYA H S",                     usn: "RVCE25BTE058" },
    { roll: 4,  name: "ANANYA KARTHIK",                 usn: "RVCE25BTE006" },
    { roll: 5,  name: "ANAY DURG",                      usn: "RVCE25BTE001" },
    { roll: 6,  name: "ANIRUDH S J",                    usn: "RVCE25BTE045" },
    { roll: 7,  name: "ARAVIND R",                      usn: "RVCE25BTE055" },
    { roll: 8,  name: "ARNAV GANGOOR",                  usn: "RVCE25BTE015" },
    { roll: 9,  name: "ARNAV GAUTAM",                   usn: "RVCE25BTE016" },
    { roll: 10, name: "ARYA RITESH KHODAKE",            usn: "RVCE25BTE043" },
    { roll: 11, name: "ATHARVA TYAGI",                  usn: "RVCE25BTE061" },
    { roll: 12, name: "ATHARVA VARSHNEY",               usn: "RVCE25BTE041" },
    { roll: 13, name: "BHARGAV BEKKAM",                 usn: "RVCE25BTE028" },
    { roll: 14, name: "BHARGAVI S B",                   usn: "RVCE25BTE011" },
    { roll: 15, name: "CHANDRAKANTHA",                  usn: "RVCE25BTE029" },
    { roll: 16, name: "CHIRAG CHANDRA",                 usn: "RVCE25BTE044" },
    { roll: 17, name: "D R SHREESUJA",                  usn: "RVCE25BTE019" },
    { roll: 18, name: "DAIVIK MANKAME",                 usn: "RVCE25BTE032" },
    { roll: 19, name: "DAKSH JAIN",                     usn: "RVCE25BTE038" },
    { roll: 20, name: "DEBDEEP GHOSH",                  usn: "RVCE25BTE020" },
    { roll: 21, name: "DHRUV TANDEKAR",                 usn: "RVCE25BTE014" },
    { roll: 22, name: "DIVYA YANAMASHETTI",             usn: "RVCE25BTE018" },
    { roll: 23, name: "DONDAPATI SINDHUJA",             usn: "RVCE25BTE025" },
    { roll: 24, name: "GARGI TOMAR",                    usn: "RVCE25BTE005" },
    { roll: 25, name: "GAUTHAM REDDY CHIRAPU REDDY",    usn: "RVCE25BTE034" },
    { roll: 26, name: "HARDIK VATS",                    usn: "RVCE25BTE035" },
    { roll: 27, name: "HRITHIK",                        usn: "RVCE25BTE030" },
    { roll: 28, name: "ISHITA SINGH",                   usn: "RVCE25BTE009" },
    { roll: 29, name: "JAHNAVI A H",                    usn: "RVCE25BTE057" },
    { roll: 30, name: "JASVANTH V A",                   usn: "RVCE25BTE053" },
    { roll: 31, name: "KARTHIK R",                      usn: "RVCE25BTE031" },
    { roll: 32, name: "KSHITI CHAUDHARY",               usn: "RVCE25BTE021" },
    { roll: 33, name: "MANIK KANYAL",                   usn: "RVCE25BTE033" },
    { roll: 34, name: "MANYA S",                        usn: "RVCE25BTE048" },
    { roll: 35, name: "MD IRFAN DARVAN",                usn: "RVCE25BTE013" },
    { roll: 36, name: "MEGHNA ROY",                     usn: "RVCE25BTE060" },
    { roll: 37, name: "MIA MICHAEL",                    usn: "RVCE25BTE004" },
    { roll: 38, name: "MOHIT RAJ JALGAR",               usn: "RVCE25BTE026" },
    { roll: 39, name: "NIKHIL JAGADEESH KORI",          usn: "RVCE25BTE008" },
    { roll: 40, name: "NIMIT JAIN",                     usn: "RVCE25BTE037" },
    { roll: 41, name: "PALLAVI K",                      usn: "RVCE25BTE012" },
    { roll: 42, name: "PRANYA",                         usn: "RVCE25BTE022" },
    { roll: 43, name: "RISHAB KASHYAP A",               usn: "RVCE25BTE047" },
    { roll: 44, name: "SAI PRAKASH J",                  usn: "RVCE25BTE023" },
    { roll: 45, name: "SAMANVAY SHOBHIT",               usn: "RVCE25BTE063" },
    { roll: 46, name: "SANATH KUMAR N",                 usn: "RVCE25BTE017" },
    { roll: 47, name: "SANDYA PRITHIKA BALAJI",         usn: "RVCE25BTE049" },
    { roll: 48, name: "SATYADEEP SREENIVAS",            usn: "RVCE25BTE024" },
    { roll: 49, name: "SKANDHA VISAKHA",                usn: "RVCE25BTE003" },
    { roll: 50, name: "SOHAN A GADAVI",                 usn: "RVCE25BTE010" },
    { roll: 51, name: "SRIJAN SANJEEV INGALAGI",        usn: "RVCE25BTE050" },
    { roll: 52, name: "STUTHI SANTOSH MATHAPATI",       usn: "RVCE25BTE052" },
    { roll: 53, name: "SUHAS CHAWAN",                   usn: "RVCE25BTE056" },
    { roll: 54, name: "SUHAS V J",                      usn: "RVCE25BTE039" },
    { roll: 55, name: "SUJAN KUMAR S K",                usn: "RVCE25BTE046" },
    { roll: 56, name: "SWAPNIL SAHU",                   usn: "RVCE25BTE042" },
    { roll: 57, name: "THARICKA MURARI",                usn: "RVCE25BTE027" },
    { roll: 58, name: "THARUN S",                       usn: "RVCE25BTE002" },
    { roll: 59, name: "VAISHNAVI KARPUR",               usn: "RVCE25BTE062" },
    { roll: 60, name: "VANI GUSAIN",                    usn: "RVCE25BTE036" },
    { roll: 61, name: "VEDAANT RAJ",                    usn: "RVCE25BTE007" },
    { roll: 62, name: "VINAYAK S HALLI",                usn: "RVCE25BTE054" },
    { roll: 63, name: "YASHASVI ARVIND JAIN",           usn: "RVCE25BTE040" }
  ];

  const studentListEl = document.getElementById("studentList");
  const searchInputEl = document.getElementById("searchInput");
  const visibleCountEl = document.getElementById("visibleCount");
  const modal = document.getElementById("loginModal");
  const modalName = document.getElementById("modalStudentName");
  const modalUsn = document.getElementById("modalStudentUsn");
  const modalRoll = document.getElementById("modalStudentRoll");
  const closeModalBtn = document.getElementById("closeModalBtn");
  const loginForm = document.getElementById("loginForm");
  const usnInput = document.getElementById("usnInput");
  const loginError = document.getElementById("loginError");

  let currentStudent = null;

  function renderStudents(filter = "") {
    const q = filter.trim().toLowerCase();
    studentListEl.innerHTML = "";
    let count = 0;
    students.forEach((s) => {
      const match =
        !q ||
        s.name.toLowerCase().includes(q) ||
        String(s.roll).includes(q);
      if (!match) return;
      count++;
      const btn = document.createElement("button");
      btn.type = "button";
      btn.className = "student-btn";
      btn.innerHTML = `
        <span class="roll">${s.roll}</span>
        <span class="student-name">${s.name}</span>
      `;
      btn.addEventListener("click", () => openModal(s));
      studentListEl.appendChild(btn);
    });
    visibleCountEl.textContent = count;
  }

  function openModal(s) {
    currentStudent = s;
    modalName.textContent = s.name;
    modalUsn.textContent = s.usn + " â€¢ ET";
    modalRoll.textContent = s.roll;
    loginError.textContent = "";
    usnInput.value = "";
    modal.classList.add("active");
    usnInput.focus();
  }

  function closeModal() {
    modal.classList.remove("active");
    currentStudent = null;
  }

  searchInputEl.addEventListener("input", (e) => renderStudents(e.target.value));
  closeModalBtn.addEventListener("click", closeModal);
  modal.addEventListener("click", (e) => { if (e.target === modal) closeModal(); });

  loginForm.addEventListener("submit", async (e) => {
    e.preventDefault();
    if (!currentStudent) return;

    const entered = usnInput.value.trim().toUpperCase();
    const expected = currentStudent.usn.toUpperCase();
    if (!entered) {
      loginError.textContent = "Enter your USN.";
      return;
    }
    if (entered !== expected) {
      loginError.textContent = "Wrong USN for this name.";
      return;
    }
    loginError.textContent = "";

    try {
      await db.collection("scores").doc(entered).set({
        usn: entered,
        name: currentStudent.name,
        roll: currentStudent.roll,
        totalScore: 0,
        gameTime: null,
        quizTime: null,
        accuracy: null,
        updatedAt: firebase.firestore.FieldValue.serverTimestamp()
      }, { merge: true });
    } catch (err) {
      console.error("Firestore write error:", err);
    }

    const params = new URLSearchParams({
      usn: entered,
      name: currentStudent.name,
      roll: currentStudent.roll
    });
    window.location.href = "cards.html?" + params.toString();
  });

  // initial render
  renderStudents();
</script>


  
</body>
</html>

